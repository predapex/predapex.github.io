<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Interactive Pump & Valves</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    svg {
      margin-top: 20px;
    }
    .valve {
      cursor: pointer;
      transition: fill 0.3s;
    }
    .open {
      fill: green;
    }
    .closed {
      fill: red;
    }
    .flow-line {
      stroke: lightblue;
      stroke-width: 4;
      stroke-dasharray: 10;
      stroke-dashoffset: 0;
      opacity: 0.1;
      transition: opacity 0.3s;
    }
    .flow-active {
      opacity: 1;
      animation: flow 1s linear infinite;
    }
    @keyframes flow {
      to {
        stroke-dashoffset: -20;
      }
    }
    .label {
      font-size: 14px;
      text-anchor: middle;
    }
    .controls {
      margin: 10px;
    }
    button {
      margin: 5px;
      padding: 5px 10px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Interactive Pump Diagram</h2>
  <div class="controls">
    <button id="pumpToggle">Pump: OFF</button>
    <button id="resetValves">Reset Valves</button>
  </div>
  <svg viewBox="0 0 600 400" width="90%" height="500">
    <!-- Labels -->
    <text x="100" y="20" class="label">From</text>
    <text x="100" y="360" class="label">Suction</text>
    <text x="500" y="20" class="label">To</text>
    <text x="500" y="360" class="label">Return</text>

    <!-- Pump -->
    <circle id="pump" cx="300" cy="180" r="30" fill="gray" />
    <text x="300" y="185" class="label">Pump</text>

    <!-- Flow lines (Suction to Pump) -->
    <line id="line-s1" class="flow-line" x1="140" y1="60" x2="300" y2="180" />
    <line id="line-s2" class="flow-line" x1="140" y1="120" x2="300" y2="180" />
    <line id="line-s3" class="flow-line" x1="140" y1="180" x2="300" y2="180" />
    <line id="line-s4" class="flow-line" x1="140" y1="240" x2="300" y2="180" />

    <!-- Flow lines (Pump to Return) -->
    <line id="line-r1" class="flow-line" x1="300" y1="180" x2="460" y2="60" />
    <line id="line-r2" class="flow-line" x1="300" y1="180" x2="460" y2="120" />
    <line id="line-r3" class="flow-line" x1="300" y1="180" x2="460" y2="180" />
    <line id="line-r4" class="flow-line" x1="300" y1="180" x2="460" y2="240" />

    <!-- Suction Valves (Left Side) -->
    <rect id="suction1" class="valve closed" x="120" y="50" width="30" height="30" />
    <text x="135" y="72" class="label">1</text>

    <rect id="suction2" class="valve closed" x="120" y="110" width="30" height="30" />
    <text x="135" y="132" class="label">2</text>

    <rect id="suction3" class="valve closed" x="120" y="170" width="30" height="30" />
    <text x="135" y="192" class="label">3</text>

    <rect id="suction4" class="valve closed" x="120" y="230" width="30" height="30" />
    <text x="135" y="252" class="label">4</text>

    <!-- Return Valves (Right Side) -->
    <rect id="return1" class="valve closed" x="460" y="50" width="30" height="30" />
    <text x="475" y="72" class="label">1</text>

    <rect id="return2" class="valve closed" x="460" y="110" width="30" height="30" />
    <text x="475" y="132" class="label">2</text>

    <rect id="return3" class="valve closed" x="460" y="170" width="30" height="30" />
    <text x="475" y="192" class="label">3</text>

    <rect id="return4" class="valve closed" x="460" y="230" width="30" height="30" />
    <text x="475" y="252" class="label">4</text>
  </svg>

  <script>
    let pumpOn = false;
    const pumpButton = document.getElementById('pumpToggle');
    const resetButton = document.getElementById('resetValves');

    const valveToLine = {
      suction1: "line-s1",
      suction2: "line-s2",
      suction3: "line-s3",
      suction4: "line-s4",
      return1: "line-r1",
      return2: "line-r2",
      return3: "line-r3",
      return4: "line-r4",
    };

    function updateFlow() {
      document.querySelectorAll('.valve').forEach(valve => {
        const lineId = valveToLine[valve.id];
        if (lineId) {
          const line = document.getElementById(lineId);
          if (pumpOn && valve.classList.contains('open')) {
            line.classList.add('flow-active');
          } else {
            line.classList.remove('flow-active');
          }
        }
      });
    }

    document.querySelectorAll('.valve').forEach(valve => {
      valve.addEventListener('click', () => {
        valve.classList.toggle('open');
        valve.classList.toggle('closed');
        updateFlow();
      });
    });

    pumpButton.addEventListener('click', () => {
      pumpOn = !pumpOn;
      pumpButton.innerText = pumpOn ? 'Pump: ON' : 'Pump: OFF';
      document.getElementById('pump').setAttribute('fill', pumpOn ? 'orange' : 'gray');
      updateFlow();
    });

    resetButton.addEventListener('click', () => {
      document.querySelectorAll('.valve').forEach(valve => {
        valve.classList.remove('open');
        valve.classList.add('closed');
      });
      updateFlow();
    });
  </script>
</body>
</html>
