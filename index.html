<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Tank Pump System</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
    }

    svg {
      border: 1px solid #ccc;
      margin-top: 20px;
    }

    .valve {
      cursor: pointer;
      fill: red;
      stroke: black;
      stroke-width: 1;
    }

    .valve.open {
      fill: green;
    }

    .pipe {
      stroke: #bbb;
      stroke-width: 8;
      fill: none;
    }

    .pump {
      fill: #666;
    }

    .flow-line {
      stroke: blue;
      stroke-width: 3;
      stroke-dasharray: 6;
      stroke-dashoffset: 0;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .flow-active {
      opacity: 1;
      animation: flow 0.7s linear infinite;
    }

    @keyframes flow {
      0% { stroke-dashoffset: 0; }
      100% { stroke-dashoffset: -12; }
    }

    .label {
      font-size: 14px;
      font-weight: bold;
    }

    button {
      margin: 10px;
    }
  </style>
</head>
<body>
  <h2>Interactive Tank Pump System</h2>
  <button onclick="togglePump()">Pump: <span id="pumpState">OFF</span></button>
  <svg width="900" height="500">
    <!-- Suction manifold -->
    <line x1="80" y1="180" x2="820" y2="180" class="pipe"/>
    <!-- Suction valves -->
    <rect x="100" y="160" width="30" height="30" class="valve" id="suction-valve-1" onclick="toggleValve(1, 'suction')"/>
    <line id="flow-suction-1" x1="115" y1="190" x2="450" y2="220" class="flow-line"/>
    <rect x="280" y="160" width="30" height="30" class="valve" id="suction-valve-2" onclick="toggleValve(2, 'suction')"/>
    <line id="flow-suction-2" x1="295" y1="190" x2="450" y2="220" class="flow-line"/>
    <rect x="460" y="160" width="30" height="30" class="valve" id="suction-valve-3" onclick="toggleValve(3, 'suction')"/>
    <line id="flow-suction-3" x1="475" y1="190" x2="450" y2="220" class="flow-line"/>
    <rect x="640" y="160" width="30" height="30" class="valve" id="suction-valve-4" onclick="toggleValve(4, 'suction')"/>
    <line id="flow-suction-4" x1="655" y1="190" x2="450" y2="220" class="flow-line"/>

    <!-- Pump -->
    <rect x="420" y="220" width="60" height="40" class="pump"/>
    <text x="450" y="245" text-anchor="middle" fill="white">Pump</text>

    <!-- Return manifold -->
    <line x1="80" y1="300" x2="820" y2="300" class="pipe"/>
    <!-- Return valves -->
    <rect x="100" y="300" width="30" height="30" class="valve" id="return-valve-1" onclick="toggleValve(1, 'return')"/>
    <line id="flow-return-1" x1="450" y1="260" x2="115" y2="300" class="flow-line"/>
    <rect x="280" y="300" width="30" height="30" class="valve" id="return-valve-2" onclick="toggleValve(2, 'return')"/>
    <line id="flow-return-2" x1="450" y1="260" x2="295" y2="300" class="flow-line"/>
    <rect x="460" y="300" width="30" height="30" class="valve" id="return-valve-3" onclick="toggleValve(3, 'return')"/>
    <line id="flow-return-3" x1="450" y1="260" x2="475" y2="300" class="flow-line"/>
    <rect x="640" y="300" width="30" height="30" class="valve" id="return-valve-4" onclick="toggleValve(4, 'return')"/>
    <line id="flow-return-4" x1="450" y1="260" x2="655" y2="300" class="flow-line"/>
  </svg>

  <script>
    let pumpOn = false;
    const openValves = { suction: new Set(), return: new Set() };

    function togglePump() {
      pumpOn = !pumpOn;
      document.getElementById("pumpState").innerText = pumpOn ? "ON" : "OFF";
      updateFlow();
    }

    function toggleValve(id, side) {
      const el = document.getElementById(`${side}-valve-${id}`);
      if (openValves[side].has(id)) {
        openValves[side].delete(id);
        el.classList.remove("open");
      } else {
        openValves[side].add(id);
        el.classList.add("open");
      }
      updateFlow();
    }

    function updateFlow() {
      for (let i = 1; i <= 4; i++) {
        const show = pumpOn && openValves.suction.has(i) && openValves.return.has(i);
        document.getElementById(`flow-suction-${i}`).setAttribute("class", show ? "flow-line flow-active" : "flow-line");
        document.getElementById(`flow-return-${i}`).setAttribute("class", show ? "flow-line flow-active" : "flow-line");
      }
    }
  </script>
</body>
</html>
