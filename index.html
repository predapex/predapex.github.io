<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Water Tank System Interactive Diagram</title>
  <style>
    body { background: #f3f6fa; font-family: sans-serif; }
    .diagram { margin: 30px auto; display: flex; flex-direction: column; align-items: center; }
    .controls { margin: 20px 0; }
    .valve-toggle, .pump-toggle { margin: 5px; }
    .tank { fill: #b6d0e2; stroke: #4682b4; stroke-width: 3; }
    .pump { fill: #ffd700; stroke: #b8860b; stroke-width: 3; }
    .pipe { stroke: #888; stroke-width: 7; }
    .valve { stroke: #333; stroke-width: 2; fill: #fff; }
    .valve.open { fill: #4caf50; }
    .valve.closed { fill: #f44336; }
    .water { stroke: #2196f3; stroke-width: 7; stroke-dasharray: 15 10; animation: flow 1s linear infinite; }
    .water.inactive { stroke: #bbb; }
    @keyframes flow {
      to { stroke-dashoffset: -25; }
    }
  </style>
</head>
<body>
  <div class="diagram">
    <svg id="diagram" width="800" height="500">
      <!-- Tanks -->
      <rect x="60"  y="100" width="80" height="180" rx="30" class="tank" id="tank0"/>
      <rect x="60"  y="320" width="80" height="180" rx="30" class="tank" id="tank1"/>
      <rect x="660" y="100" width="80" height="180" rx="30" class="tank" id="tank2"/>
      <rect x="660" y="320" width="80" height="180" rx="30" class="tank" id="tank3"/>

      <!-- Pump -->
      <ellipse cx="400" cy="250" rx="50" ry="50" class="pump" id="pump"/>
      <text x="400" y="255" text-anchor="middle" font-size="18" fill="#333">PUMP</text>

      <!-- Pipes (suction) -->
      <line x1="140" y1="130" x2="250" y2="130" class="pipe" id="pipe-suction-0"/>
      <line x1="140" y1="410" x2="250" y2="410" class="pipe" id="pipe-suction-1"/>
      <line x1="660" y1="130" x2="550" y2="130" class="pipe" id="pipe-suction-2"/>
      <line x1="660" y1="410" x2="550" y2="410" class="pipe" id="pipe-suction-3"/>
      <line x1="250" y1="130" x2="350" y2="170" class="pipe"/>
      <line x1="250" y1="410" x2="350" y2="320" class="pipe"/>
      <line x1="550" y1="130" x2="450" y2="170" class="pipe"/>
      <line x1="550" y1="410" x2="450" y2="320" class="pipe"/>
      <!-- To pump center -->
      <line x1="350" y1="170" x2="400" y2="200" class="pipe"/>
      <line x1="350" y1="320" x2="400" y2="300" class="pipe"/>
      <line x1="450" y1="170" x2="400" y2="200" class="pipe"/>
      <line x1="450" y1="320" x2="400" y2="300" class="pipe"/>

      <!-- Pipes (return) -->
      <line x1="400" y1="200" x2="400" y2="300" class="pipe"/>
      <line x1="400" y1="200" x2="350" y2="170" class="pipe"/>
      <line x1="400" y1="300" x2="350" y2="320" class="pipe"/>
      <line x1="400" y1="200" x2="450" y2="170" class="pipe"/>
      <line x1="400" y1="300" x2="450" y2="320" class="pipe"/>
      <!-- Return to tanks -->
      <line x1="350" y1="170" x2="250" y2="130" class="pipe"/>
      <line x1="350" y1="320" x2="250" y2="410" class="pipe"/>
      <line x1="450" y1="170" x2="550" y2="130" class="pipe"/>
      <line x1="450" y1="320" x2="550" y2="410" class="pipe"/>
      <line x1="250" y1="130" x2="140" y2="130" class="pipe" id="pipe-return-0"/>
      <line x1="250" y1="410" x2="140" y2="410" class="pipe" id="pipe-return-1"/>
      <line x1="550" y1="130" x2="660" y2="130" class="pipe" id="pipe-return-2"/>
      <line x1="550" y1="410" x2="660" y2="410" class="pipe" id="pipe-return-3"/>
      
      <!-- Valves (suction) -->
      <circle cx="200" cy="130" r="12" class="valve closed" id="valve-suction-0"/>
      <circle cx="200" cy="410" r="12" class="valve closed" id="valve-suction-1"/>
      <circle cx="600" cy="130" r="12" class="valve closed" id="valve-suction-2"/>
      <circle cx="600" cy="410" r="12" class="valve closed" id="valve-suction-3"/>
      <!-- Valves (return) -->
      <circle cx="200" cy="130" r="12" class="valve closed" id="valve-return-0"/>
      <circle cx="200" cy="410" r="12" class="valve closed" id="valve-return-1"/>
      <circle cx="600" cy="130" r="12" class="valve closed" id="valve-return-2"/>
      <circle cx="600" cy="410" r="12" class="valve closed" id="valve-return-3"/>

      <!-- Water Animation (suction) -->
      <line x1="140" y1="130" x2="250" y2="130" class="water inactive" id="water-suction-0"/>
      <line x1="140" y1="410" x2="250" y2="410" class="water inactive" id="water-suction-1"/>
      <line x1="660" y1="130" x2="550" y2="130" class="water inactive" id="water-suction-2"/>
      <line x1="660" y1="410" x2="550" y2="410" class="water inactive" id="water-suction-3"/>
      <!-- Water Animation (return) -->
      <line x1="250" y1="130" x2="140" y2="130" class="water inactive" id="water-return-0"/>
      <line x1="250" y1="410" x2="140" y2="410" class="water inactive" id="water-return-1"/>
      <line x1="550" y1="130" x2="660" y2="130" class="water inactive" id="water-return-2"/>
      <line x1="550" y1="410" x2="660" y2="410" class="water inactive" id="water-return-3"/>
    </svg>

    <div class="controls">
      <button id="pump-toggle" class="pump-toggle">Pump: OFF</button>
      <br>
      <div>
        <span>Suction Valves:</span>
        <button class="valve-toggle" data-manifold="suction" data-idx="0">Tank 1</button>
        <button class="valve-toggle" data-manifold="suction" data-idx="1">Tank 2</button>
        <button class="valve-toggle" data-manifold="suction" data-idx="2">Tank 3</button>
        <button class="valve-toggle" data-manifold="suction" data-idx="3">Tank 4</button>
      </div>
      <div>
        <span>Return Valves:</span>
        <button class="valve-toggle" data-manifold="return" data-idx="0">Tank 1</button>
        <button class="valve-toggle" data-manifold="return" data-idx="1">Tank 2</button>
        <button class="valve-toggle" data-manifold="return" data-idx="2">Tank 3</button>
        <button class="valve-toggle" data-manifold="return" data-idx="3">Tank 4</button>
      </div>
    </div>
  </div>
  <script>
    // State
    let pumpOn = false;
    let valves = {
      suction: [false, false, false, false], // false = closed, true = open
      return: [false, false, false, false]
    };

    // Elements
    const pumpToggle = document.getElementById('pump-toggle');
    const valveToggles = document.querySelectorAll('.valve-toggle');

    // Update valve visuals
    function updateValves() {
      for (let m of ['suction','return']) {
        for (let i=0;i<4;i++) {
          const el = document.getElementById(`valve-${m}-${i}`);
          if (!el) continue;
          el.classList.remove('open','closed');
          el.classList.add(valves[m][i] ? 'open' : 'closed');
        }
      }
    }

    // Update water animation
    function updateWater() {
      for (let i=0;i<4;i++) {
        // Suction: tank → pump
        let el1 = document.getElementById(`water-suction-${i}`);
        // Return: pump → tank
        let el2 = document.getElementById(`water-return-${i}`);
        let active = pumpOn && valves.suction[i] && valves.return[i];
        [el1,el2].forEach(el => {
          if (el) {
            el.classList.toggle('inactive', !active);
          }
        });
      }
    }

    // Update pump button
    function updatePump() {
      pumpToggle.textContent = `Pump: ${pumpOn ? 'ON' : 'OFF'}`;
      document.getElementById('pump').style.fill = pumpOn ? '#4caf50' : '#ffd700';
    }

    // Initial render
    updateValves();
    updateWater();
    updatePump();

    // Event listeners
    pumpToggle.addEventListener('click', () => {
      pumpOn = !pumpOn;
      updatePump();
      updateWater();
    });

    valveToggles.forEach(btn => {
      btn.addEventListener('click', () => {
        const m = btn.dataset.manifold;
        const idx = +btn.dataset.idx;
        valves[m][idx] = !valves[m][idx];
        updateValves();
        updateWater();
      });
    });
  </script>
</body>
</html>
